{{- if .Values.dashboard.enabled }}
apiVersion: coralogix.com/v1alpha1
kind: Dashboard
metadata:
  name: {{ include "coralogixOperator.fullname" . }}-dashboard-json
  labels:
    {{ include "coralogixOperator.labels" . | nindent 4 }}
spec:
  json: |
    {
      "id": "rz92iUfa6vJbxlXZudSW1",
      "name": "Coralogix Operator",
      "layout": {
        "sections": [
          {
            "id": { "value": "c18d11e2-5745-4023-a2a4-5a055625668e" },
            "rows": [
              {
                "id": { "value": "61f36612-0df0-4ed2-a313-1e50d2d5204a" },
                "appearance": { "height": 19 },
                "widgets": [
                  {
                    "id": { "value": "8b8df9b0-1ea5-4b52-863b-a3793b2a8319" },
                    "title": "Operator Instances Status",
                    "definition": {
                      "hexagon": {
                        "query": {
                          "metrics": {
                            "promqlQuery": {
                              "value": "kube_pod_container_status_running{container = \"coralogix-operator\"} * on(pod) group_left(image) kube_pod_container_info"
                            },
                            "filters": [],
                            "editorMode": "METRICS_QUERY_EDITOR_MODE_TEXT",
                            "aggregation": "AGGREGATION_UNSPECIFIED",
                            "promqlQueryType": "PROM_QL_QUERY_TYPE_INSTANT"
                          }
                        },
                        "min": 0,
                        "max": 100,
                        "unit": "UNIT_UNSPECIFIED",
                        "thresholds": [
                          { "from": 0, "color": "var(--c-severity-log-debug)", "label": "Unknown" },
                          { "from": 0, "color": "var(--c-severity-log-error)", "label": "Not Running" },
                          { "from": 1, "color": "var(--c-severity-log-verbose)", "label": "Running" }
                        ],
                        "dataModeType": "DATA_MODE_TYPE_HIGH_UNSPECIFIED",
                        "customUnit": "",
                        "decimal": 0,
                        "thresholdType": "THRESHOLD_TYPE_ABSOLUTE",
                        "legend": {
                          "isVisible": true,
                          "columns": [],
                          "groupByQuery": true,
                          "placement": "LEGEND_PLACEMENT_AUTO"
                        },
                        "legendBy": "LEGEND_BY_THRESHOLDS"
                      }
                    }
                  }
                ]
              }
            ],
            "options": {
              "internal": {}
            }
          }
        ]
      },
      "variables": [],
      "variablesV2": [],
      "filters": [
        {
          "source": {
            "metrics": {
              "label": "namespace",
              "operator": {
                "equals": {
                  "selection": {
                    "list": { "values": [] }
                  }
                }
              }
            }
          },
          "enabled": true,
          "collapsed": false
        }
      ],
      "relativeTimeFrame": "900s",
      "annotations": [],
      "off": {},
      "actions": []
    }
  folderRef:
    backendRef:
      path: coralogix-operator
---
apiVersion: coralogix.com/v1alpha1
kind: DashboardsFolder
metadata:
  labels:
    app.kubernetes.io/name: coralogix-operator
    app.kubernetes.io/managed-by: kustomize
  name: coralogix-operator
spec:
  name: coralogix-operator
  customId: "ffa8b720-c5d9-4c08-bb27-e3de0837a8d2"
{{- end }}
